"use strict";var PerfUtil=PerfUtil||{};PerfUtil=function(){var e=null,r=null,t=function(e){var r={ProcessIntervalInMs:3e3,MinTimeToLogInMs:3e3};return r},n=function(e){var t=r.ClassInitializers.getNewBoldEventObject(e);return t.Page=window.location.href,t},i=function(){var t=[],i=!1;if(void 0===window.performance){(p=n(r.Enums.EventTypes.Page.PG_PerfMetrics)).Properties.message="Performance NOT supported",p.Properties.iserror=!0,t.push(p),i=!0}else{var a=window.performance.getEntriesByType("resource");if(void 0===a||null==a)(p=n(r.Enums.EventTypes.Page.PG_PerfMetrics)).Properties.message="No resources found in performance",p.Properties.iserror=!0,t.push(p),i=!0;else if(a.length>0){for(var c=0;c<a.length;c++){var p;if(a[c].responseEnd-a[c].fetchStart>e.MinTimeToLogInMs&&a[c].name.indexOf("v1/clients/events")<0)(p=n(r.Enums.EventTypes.Page.PG_PerfMetrics)).Properties.name=a[c].name,p.Properties.iserror=!1,p.Properties.entryType=a[c].entryType,p.Properties.startTime=s(a[c].startTime),p.Properties.duration=s(a[c].duration),p.Properties.initiatorType=a[c].initiatorType,p.Properties.workerStart=s(a[c].workerStart),p.Properties.redirectStart=s(a[c].redirectStart),p.Properties.redirectEnd=s(a[c].redirectEnd),p.Properties.fetchStart=s(a[c].fetchStart),p.Properties.domainLookupStart=s(a[c].domainLookupStart),p.Properties.domainLookupEnd=s(a[c].domainLookupEnd),p.Properties.connectStart=s(a[c].connectStart),p.Properties.connectEnd=s(a[c].connectEnd),p.Properties.secureConnectionStart=s(a[c].secureConnectionStart),p.Properties.requestStart=s(a[c].requestStart),p.Properties.responseStart=s(a[c].responseStart),p.Properties.responseEnd=s(a[c].responseEnd),p.Properties.transferSize=s(a[c].transferSize),p.Properties.encodedBodySize=s(a[c].encodedBodySize),p.Properties.decodedBodySize=s(a[c].decodedBodySize),p.Properties.sourcepageurl=window.location.href,p.Properties.perfJSVersion=o(),t.push(p)}window.performance.clearResourceTimings()}}return t.length>0&&t.forEach(function(e){BoldEventStream.sendEventToServerAsync(e)}),i},o=function(){return"1.0.2"},s=function(e){return null!=e&&""!=e?Number(e.toFixed(0)):0};return{initializeAsync:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(s,a){r=n,e=null==o?t():o,i()||setInterval(i,e.ProcessIntervalInMs),PerfUtil.isInitializationDone=!0})},isInitializationDone:!1,ClassInitializers:{getNewConfigurationObject:t,getVersion:o}}}();